# 메모리 관리 


* [주소 바인딩](#주소-바인딩)


&nbsp;      
## 주소 바인딩
논리적 주소(logical address) 또는 가상 주소(virtual address)는 프로그램이 실행을 위해 메모리에 적재될때 그 프로세스를 위해 생성되는 독자적인 주소 공간으로 각 프로세스마다 독립적으로 할당되며 0번지 부터 시작된다.


물리적 주소(physical address)는 물리적 메모리에 실제 올라가는 위치로 낮은 주소 영역에는 운영체제, 높은 주소 영역에는 사용자 프로세스들이 올라간다.


주소 바인딩(address binding)은 프로세스의 논리적 주소를 물리적 메모리 주소로 연결시켜주는 작업이다.

주소 바인딩의 방식은 프로그램이 적재되는 물리적 메모리의 주소가 언제 결정되느냐에 따라 세 가지로 분류할 수 있다:


* 컴파일 타임 바인딩(compile time binding): 물리적 메모리 주소가 프로그램을 컴파일할 때에 결정되는 주소 바인딩 방식, 절대 코드(absolute code)를 생성하는 바인딩 방식이라고도 한다. 만약 프로그램이 올라와 있는 물리적 메모리의 위치를 변경하려면 컴파일러를 다시 해야 한다. 이 방식은 비현실적이고 현대의 시분할 컴퓨팅 환경에서는 잘 사용하지 않는 기법이다.
* 로드 타임 바인딩(load time binding): 프로그램의 실행이 시작될 때 물리적 메모리 주소가 결정되는 주소 바인딩 방식, 로더(loader)의 책임 하에 물리적 메모리 주소가 부여되며 프로그램이 종료될 때까지 물리적 메모리 상의 위치가 고정된다. 컴파일러가 재배치 가능 코드(reloca-table code)를 생성한 경우에만 가능한 방식이다.
    * 로더: 사용자 프로그램을 메모리에 적재시키는 프로그램
* 실행 시간 바인딩(execution time binding or run time binding): 프로그램이 실행을 시작한 후에도 그 프로그램이 위치한 물리적 메모리 상의 주소가 변경될 수 있는 바인딩 방식, CPU가 주소를 참조할 때마다 해당 데이터가 물리적 메모리의 어느 위치에 존재하는지 주소 매핑 테이블(address mapping table)을 이용해 바인딩을 점검해야 한다. 이 방식은 기준 레지스터(base register)와 한계 레지스터(limit register), MMU(Memory Management Unit: 메모리 관리 유닛)라는 하드웨어적인 지원이 뒷받침되어야 한다. 


MMU는 논리적 주소를 물리적 주소로 매핑해 주는 하드웨어 장치로 주소 변환을 수행하는 MMU 기법(MMU sheme)에 사용된다.


* MMU 기법: CPU가 특정 프로세스의 논리적 주소를 참조하려고 할 때 그 주소값에 기준 레지스터의 값을 더해 물리적 주소값을 얻어낸다. MMU 기법에서는 프로그램의 주소 공간이 물리적 메모리의 한 장소에 연속적으로 적재되는 것으로 가정, 적재되는 물리적 메모리 상의 시작 주소만 알면 주소 변환을 쉽개 할 수 있다.
    * 기준 레지스터는 재배치 레지스터(relocation register)라고도 부르며 그 프로세스의 물리적 메모리 시작 주소를 가지고 있다.
    
    
프로세스는 자신만의 고유한 주소 공간을 가지고 있으므로 동일한 주소값이라 하더라도 각 프로세스마다 서로 다른 내용을 담고 있게 되는데 MMU 기법이 이를 지원한다.


다중 프로그래밍 환경에서 물리적 메모리 안에 여러 개의 프로세스가 동시에 올라와 있는 경우가 대부분이다. MMU 기법을 사용하여 주소 변환을 했을 경우 CPU가 요청한 논리적 주소값과 재배치 레지스터 안에 있는 값을 더한 결과가 해당 프로세스의 주소 공간으 벗어나는 경우가 발생할 수 있다.
운영 체제는 이러한 특수한 상황이 발생하는 것을 방지하기 위해 한계 레지스터를 사용한다.
* 한계 레지스터는 현재 CPU에서 수행중인 프로세스의 논리적 주소의 최댓값(프로세스의 크기)을 담고 있다.


메모리 보안을 달성하는 방법:


1. CPU가 요청한 프로세스의 논리적 주소값이 한계 레지스터 내에 저장된 그 프로세스의 크기보다 작은지 확인
2. 작다면 논리적 주소값에 재배치 레지스터 값을 더해 물리적 주소를 구한 다음 해당 물리적 메모리 위치를 접근하도록 허락
3. 크다면 다른 프로세스의 주소 영역을 접근하려는 시도이므로 트랩을 발생시켜 해당 프로세스를 강제 종료





&nbsp;
&nbsp;      
### [by. 0junChoi](https://github.com/0jun0815) email: <0jun0815@gamil.com>

